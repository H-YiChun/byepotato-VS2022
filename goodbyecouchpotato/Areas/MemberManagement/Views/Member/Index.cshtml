@model _MemberViewModel
@section Styles
{
    <link href="~/lib/datatables/css/jquery.datatables.min.css" rel="stylesheet" />

    <style>
        /* 隱藏 DataTables 預設的搜尋框 */
        .dataTables_filter {
            display: none;
        }
    </style>
}


<h1>會員管理</h1>
<hr>
<!-- 搜尋框和下拉選單 -->
<div class="container">
    <div class="row">
<div class="col-12 col-md-2">
    <h5>會員搜尋</h5>
    <div class="mt-3 fs-6">
    <input type="text" id="searchAccount" placeholder="請填寫用戶名稱">
    </div>
            <div class="mt-3 fs-6">
    <input type="text" id="searchEmail" placeholder="請填寫信箱">
    </div>
            <div class="mt-3 fs-6">
    <input type="text" id="searchCoins" placeholder="請填寫貨幣數量">
    </div>
            <div class="mt-3 fs-6">
    <select id="searchPlayerstatus">
        <option value="">玩家狀態</option>
        <option value="true">true</option>
        <option value="false">false</option>
    </select>
    </div>
</div>
<div class="col-12 col-md-10">
<table class="table table-striped table-hover" id="memberTable">
    <thead class="table-primary">
        <tr>
            <th>@Html.DisplayNameFor(model => model.Account)</th>
            <th>@Html.DisplayNameFor(model => model.Email)</th>
            <th>@Html.DisplayNameFor(model => model.Playerstatus)</th>
            <th>@Html.DisplayNameFor(model => model.Coins)</th>
        </tr>
    </thead>
</table>
</div>
</div>
</div>
@section Scripts
{
    <script src="~/lib/datatables/js/jquery.datatables.min.js"></script>
    <script src="//cdn.datatables.net/fixedheader/3.3.2/js/dataTables.fixedHeader.min.js"></script>
    <script>
        $(document).ready(function () {
            var table = $("#memberTable").DataTable({
                ajax: {
                    type: 'GET',
                    url: "/MemberManagement/Member/IndexJson",
                    dataSrc: function (json) { return json; }
                },
                columns: [
                    { "data": "account", "width": "10%" },
                    { "data": "email", "width": "10%" },
                    { "data": "playerstatus", "width": "10%" },
                    { "data": "coins", "width": "10%" }
                ],
                fixedHeader: { header: true },
                language: {
                    url: 'https://cdn.datatables.net/plug-ins/2.1.6/i18n/zh-HANT.json'
                }
            });

            // 自訂搜尋框事件
            $('#searchAccount').on('keyup', function () {
                table.column(0).search(this.value).draw();
            });

            $('#searchEmail').on('keyup', function () {
                table.column(1).search(this.value).draw();
            });

            $('#searchCoins').on('keyup', function () {
                table.column(3).search(this.value).draw();
            });

            // Playerstatus 下拉選單篩選
            $('#searchPlayerstatus').on('change', function () {
                table.column(2).search(this.value).draw();
            });
        });
    </script>
}